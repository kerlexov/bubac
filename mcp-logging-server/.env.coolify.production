# MCP Logging Server - Production Environment Configuration for Coolify
# Copy this file to .env and customize the values for your production deployment

# =================================================================================
# DOMAIN CONFIGURATION (REQUIRED)
# =================================================================================

# Domain names for your deployment
API_DOMAIN=api.mcp-logging.yourdomain.com
MCP_DOMAIN=mcp.mcp-logging.yourdomain.com

# =================================================================================
# NETWORK CONFIGURATION
# =================================================================================

# Port configuration (usually handled by Coolify)
INGESTION_PORT=8080
MCP_PORT=8081

# =================================================================================
# SECURITY CONFIGURATION (HIGHLY RECOMMENDED)
# =================================================================================

# Authentication settings
API_KEY_REQUIRED=true

# Rate limiting configuration
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_BURST=100

# Data protection settings
MASK_SENSITIVE_FIELDS=true
SENSITIVE_FIELDS=password,token,secret,key,authorization,credit_card,ssn,api_key,private_key,access_token,refresh_token,bearer_token

# TLS/HTTPS settings (handled by Coolify reverse proxy)
TLS_ENABLED=false
HTTPS_REDIRECT=false

# Security headers
SECURITY_HEADERS_ENABLED=true
CORS_ENABLED=false
CORS_ALLOWED_ORIGINS=

# Session and timeout settings
SESSION_TIMEOUT=3600
REQUEST_TIMEOUT=30s
CONNECTION_TIMEOUT=10s

# =================================================================================
# AUDIT AND MONITORING CONFIGURATION
# =================================================================================

# Audit logging
AUDIT_ENABLED=true
AUDIT_LOG_LEVEL=INFO
AUDIT_RETENTION_DAYS=90
AUDIT_SENSITIVE_ACTIONS=true

# Monitoring settings
METRICS_ENABLED=true
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s

# Performance monitoring
PERFORMANCE_MONITORING_ENABLED=true
SLOW_QUERY_THRESHOLD=5s
MEMORY_MONITORING_ENABLED=true

# =================================================================================
# LOGGING CONFIGURATION
# =================================================================================

# Application logging
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=10

# Buffer configuration
BUFFER_SIZE=10000
BUFFER_FLUSH_TIMEOUT=5s
BUFFER_MAX_BATCH_SIZE=100
BUFFER_COMPRESSION_ENABLED=true

# =================================================================================
# DATABASE CONFIGURATION
# =================================================================================

# Database optimization
DB_MAX_CONNECTIONS=10
DB_CONNECTION_TIMEOUT=30s
DB_QUERY_TIMEOUT=10s
DB_CONNECTION_POOL_SIZE=5

# Database maintenance
DB_MAINTENANCE_ENABLED=true
DB_VACUUM_INTERVAL=24h
DB_ANALYZE_INTERVAL=1h

# =================================================================================
# RETENTION AND CLEANUP CONFIGURATION
# =================================================================================

# Log retention policies
RETENTION_DEFAULT_DAYS=30
RETENTION_DEBUG_DAYS=7
RETENTION_INFO_DAYS=30
RETENTION_WARN_DAYS=90
RETENTION_ERROR_DAYS=365
RETENTION_FATAL_DAYS=365

# Cleanup configuration
CLEANUP_ENABLED=true
CLEANUP_INTERVAL=24h
CLEANUP_BATCH_SIZE=1000

# =================================================================================
# BACKUP CONFIGURATION
# =================================================================================

# Backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=gzip
BACKUP_ENCRYPTION_ENABLED=false
BACKUP_REMOTE_STORAGE_ENABLED=false

# =================================================================================
# RESOURCE LIMITS AND OPTIMIZATION
# =================================================================================

# Memory configuration
MEMORY_LIMIT=1Gi
MEMORY_RESERVATION=512Mi

# CPU configuration
CPU_LIMIT=1.0
CPU_RESERVATION=0.5

# Go runtime optimization
GO_MAX_PROCS=4
GOMAXPROCS=4
GOGC=100

# =================================================================================
# MONITORING STACK CONFIGURATION
# =================================================================================

# Prometheus configuration
PROMETHEUS_ENABLED=true
PROMETHEUS_RETENTION=30d
PROMETHEUS_SCRAPE_INTERVAL=15s

# Grafana configuration
GRAFANA_ENABLED=true
GRAFANA_ADMIN_PASSWORD=change_this_password_in_production
GRAFANA_ANONYMOUS_ACCESS=false

# Loki configuration
LOKI_ENABLED=true
LOKI_RETENTION=30d
LOKI_CHUNK_TARGET_SIZE=1MB

# Alertmanager configuration
ALERTMANAGER_ENABLED=true
SMTP_ENABLED=false
SLACK_ENABLED=false

# Node Exporter configuration
NODE_EXPORTER_ENABLED=true

# =================================================================================
# ADVANCED CONFIGURATION
# =================================================================================

# Circuit breaker settings
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60s
CIRCUIT_BREAKER_MONITORING_ENABLED=true

# Retry configuration
RETRY_ENABLED=true
RETRY_BASE_DELAY=1s
RETRY_MAX_DELAY=30s
RETRY_MULTIPLIER=2.0
RETRY_MAX_ATTEMPTS=3

# Compression settings
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6
COMPRESSION_THRESHOLD=1024

# Cache configuration
CACHE_ENABLED=true
CACHE_SIZE=100MB
CACHE_TTL=1h

# =================================================================================
# NOTIFICATION AND ALERTING CONFIGURATION
# =================================================================================

# Webhook notifications
NOTIFICATION_WEBHOOK_ENABLED=false
NOTIFICATION_WEBHOOK_URL=
NOTIFICATION_WEBHOOK_EVENTS=backup_complete,deployment_failed,security_alert

# Email notifications (requires SMTP)
EMAIL_NOTIFICATIONS_ENABLED=false
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
EMAIL_FROM=noreply@mcp-logging.yourdomain.com
EMAIL_TO=admin@yourdomain.com

# Slack notifications
SLACK_NOTIFICATIONS_ENABLED=false
SLACK_WEBHOOK_URL=
SLACK_CHANNEL=#mcp-logging-alerts

# =================================================================================
# DEVELOPMENT AND DEBUGGING (DISABLE IN PRODUCTION)
# =================================================================================

# Debug settings (set to false in production)
DEBUG_MODE=false
VERBOSE_LOGGING=false
DEVELOPMENT_FEATURES_ENABLED=false

# Profiling (disable in production)
PROFILING_ENABLED=false
PROFILING_PORT=6060

# =================================================================================
# COMPLIANCE AND GOVERNANCE
# =================================================================================

# GDPR compliance
GDPR_COMPLIANCE_ENABLED=true
DATA_RETENTION_ENFORCEMENT=true
RIGHT_TO_BE_FORGOTTEN_ENABLED=true

# SOC2 compliance
SOC2_COMPLIANCE_ENABLED=false
ACCESS_LOGGING_ENABLED=true
CHANGE_MANAGEMENT_ENABLED=true

# Custom compliance rules
COMPLIANCE_RULES_ENABLED=false
COMPLIANCE_CHECK_INTERVAL=24h

# =================================================================================
# INTEGRATION CONFIGURATION
# =================================================================================

# External service integrations
INTEGRATION_WEBHOOK_ENABLED=false
INTEGRATION_SLACK_ENABLED=false
INTEGRATION_PAGERDUTY_ENABLED=false
INTEGRATION_DATADOG_ENABLED=false

# API integrations
API_INTEGRATION_ENABLED=false
API_INTEGRATION_ENDPOINT=
API_INTEGRATION_API_KEY=

# =================================================================================
# MAINTENANCE AND OPERATIONS
# =================================================================================

# Maintenance windows
MAINTENANCE_ENABLED=false
MAINTENANCE_WINDOW_START=02:00
MAINTENANCE_WINDOW_DURATION=2h
MAINTENANCE_NOTIFICATION_ENABLED=true

# Auto-scaling (for high-traffic deployments)
AUTO_SCALING_ENABLED=false
AUTO_SCALING_MIN_INSTANCES=1
AUTO_SCALING_MAX_INSTANCES=5
AUTO_SCALING_CPU_THRESHOLD=70
AUTO_SCALING_MEMORY_THRESHOLD=80

# =================================================================================
# EXPERIMENTAL FEATURES (USE WITH CAUTION)
# =================================================================================

# Experimental features (not recommended for production)
EXPERIMENTAL_FEATURES_ENABLED=false
BETA_ENDPOINTS_ENABLED=false
ADVANCED_ANALYTICS_ENABLED=false

# =================================================================================
# ENVIRONMENT SPECIFIC OVERRIDES
# =================================================================================

# Environment detection
ENVIRONMENT=production
CLUSTER_NAME=mcp-logging-prod
REGION=us-east-1
AVAILABILITY_ZONE=us-east-1a

# =================================================================================
# FINAL CHECKLIST
# =================================================================================
# Before deploying to production, ensure:
# 1. All domain names are configured and DNS is set up
# 2. SSL certificates are properly configured in Coolify
# 3. API keys are generated and securely stored
# 4. Backup strategy is tested and working
# 5. Monitoring and alerting are configured
# 6. Security headers and CORS are properly configured
# 7. Resource limits are appropriate for your workload
# 8. All sensitive passwords and keys are changed from defaults
# 9. Deployment validation script passes all checks
# 10. Backup and restore procedures are documented and tested